language: go

notifications:
  email:
    recipients:
      - paul@myitcv.io
    on_success: change
    on_failure: always

matrix:
  include:
    - env: CHROMEDRIVER_VERSION=2.40 CHROME_CHANNEL=beta
      addons:
        chrome: beta

go:
  - stable

go_import_path: myitcv.io

before_script:
  - go version
  - ./_scripts/setupCIEnv.sh
  - mkdir /tmp/google-chrome-bin && ln -s /usr/bin/google-chrome-$CHROME_CHANNEL /tmp/google-chrome-bin/google-chrome && export PATH=/tmp/google-chrome-bin:$PATH

install: true

script:
  - ./_scripts/run_tests.sh
  - ./_scripts/check_code_is_formatted.sh
  - ./_scripts/check_git_is_clean.sh
